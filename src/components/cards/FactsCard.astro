---
import BentoCard from "../BentoCard.astro";
import FactsCardContent from "../FactsCardContent.svelte";

// Fetch the fun facts on the server side
const response = await fetch("https://api.bsoyka.me/stats");
let facts = [
    `I've received a Civilian Service Achievement Medal from the U.S. Army.`,
    `I won 2nd place in a national photography competition.`,
    `I became an Eagle Scout in 2023.`,
    `My photos on Unsplash have been downloaded over 16,000 times.`
];

if (response.ok) {
    const data = await response.json();
    facts.push(
        `I've found ${data.geocaches_found.toLocaleString('en-US')} geocaches.`,
        `I've made ${data.wikipedia_edits.toLocaleString('en-US')} edits to Wikipedia.`
    );
} else {
    console.warn("Failed to fetch stats on the server side.");
}
---

<BentoCard title="Fun facts" colSpan="lg:col-span-2">
    <FactsCardContent client:load {facts}/>
</BentoCard>